<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.7.xsd">
    <grid name="post-grid" title="Posts" orderBy="-postTime">
	    <toolbar>
	    	<button name="edit" title="" hidden="true"/>
	    	<button name="save" title="" hidden="true" />
<!-- 	    	<button name="postUpdate" title="Post Update" onClick="post.do"/> -->
<!-- 	    	<button name="new" title="" hidden="true"/> -->
	    	<button name="search" title="" hidden="true"/>
	    </toolbar>
<!--         <field name="contentId" title="Content ID"/> -->
        <field name="content" title="Content"/>
<!--         <field name="snType" title="Network"/> -->
		<field name="postTime"/>
        <field name="comments" title="Comments">
        	<grid title="Comment List">
        		<field name="comment" title="Comment"/>
        		<field name="fromUser" title="By"/>
				<field name="commentTime" title="Time"/>
        	</grid>
        </field>
     </grid>
     
   <form name="post-form" title="Status" cols="4" colWidths="15%,*,25%"
	onLoad="action-post-attributes,action-refresh-comments" onSave="action-status-update,save,action-post-attributes"
	onNew="action-user4,action-network2,action-post-attributes">
		 <group colSpan="4" cols="4">
			<field name="contentId" title="Status ID" colSpan="3" readonly="true" />
			<break />
			<field name="content" title="Status" colSpan="3" />
			<break />
			<field name="snType" title="Network" hidden="true" />
			<break />
			<field name="curUser" title="User" hidden="true" />
			<break />
			<field name="postTime" hidden="true" colSpan="3" readonly="true" />
		</group>
		<break />
		<group colSpan="1" cols="3" colWidths="15%">
			<button name="getComments" title="Get Comments" hidden="true"
				onClick="action-get-comments,action-refresh-comments" colSpan="1" />
			<button name="addComment" title="Add Comment" hidden="true"
				onClick="unhideCommentsfield" colSpan="1" />
			<spacer colSpan="1" />
		</group>
		<break />
		<group name="commentgroup" title="Comment" hidden="true" colSpan="4"
			cols="4">
			<field name="comment" title="Comment" colSpan="3" />
			<group cols="2" colSpan="1">
				<button name="addStatusComment" title="Add"
					onClick="action-status-comment,hideCommentsfield,action-refresh-comments" />
				<button name="cancel" title="Cancel"
					onClick="action-comment-clear,hideCommentsfield" />
			</group>
		</group>
		<break />
		<notebook name="notebook" hidden="true" colSpan="4">
			<page title="Comments">
				<field name="comments" colSpan="3" readonly="true">
					<grid title="" orderBy="-commentTime">
						<field name="comment" title="Comments" />
						<field name="commentTime" title="Time" />
						<field name="fromUser" title="By" />
					</grid>
					<form title="Comments">
						<field name="comment" title="Comments" colSpan="4" readonly="true" />
						<break />
						<field name="commentTime" title="Time" colSpan="4" readonly="true" />
						<break />
						<field name="fromUser" title="By" readonly="true" />
					</form>
				</field>
			</page>
		</notebook>
	</form>
     
     <action-method name="action-comment-clear">
     	<call class="com.axelor.sn.web.Controller" method="clearCommentfield"/>
     </action-method>
     <action-attrs name="hideCommentsfield">
    	<attribute name="hidden" for="addComment" expr="false"/>
    	<attribute name="hidden" for="commentgroup" expr="true"/>
    	<attribute name="required" for="comment" expr="false"/>
    </action-attrs>
    <action-attrs name="unhideCommentsfield">
    	<attribute name="hidden" for="addComment" expr="true"/>
    	<attribute name="hidden" for="commentgroup" expr="false"/>
    	<attribute name="required" for="comment" expr="true"/>
    </action-attrs>
     <action-attrs name="action-post-attributes">
     	<attribute name="hidden" for="save" expr="eval: id!=null"/>
     	<attribute name="hidden" for="notebook" expr="eval: id==null"/>
     	<attribute name="hidden" for="postTime" expr="eval: id==null"/>
     	<attribute name="hidden" for="getComments" expr="eval: id==null"/>
     	<attribute name="hidden" for="addComment" expr="eval: id==null"/>
     	<attribute name="readonly" for="content" expr="eval: id!=null"/>
     </action-attrs> 
    
    <action-method name="action-status-update">
    	<call class="com.axelor.sn.web.Controller" method="updateStatus"/>
    </action-method>
    <action-method name="action-status-comment">
    	<call class="com.axelor.sn.web.Controller" method="addStatusComment"/>
    </action-method>
    <action-method name="action-refresh-comments">
		<call class="com.axelor.sn.web.Controller" method="refreshComments"/>
    </action-method>
    <action-record name="action-user4" model="com.axelor.sn.db.PostUpdates">
	    	<field name="curUser" expr="eval: __user__"/>
    </action-record>
    <action-method name="action-get-comments">
 		<call class="com.axelor.sn.web.Controller" method="getComments" />
 	</action-method>
 	<action-method name="action-network2">
       	 <call class="com.axelor.sn.web.Controller" method="networkType"/>
    </action-method>
</object-views>
